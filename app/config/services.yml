# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
#    parameter_name: value

services:
    app.event.exception_listener:
        class: App\EventListener\ExceptionListener
        arguments: [ '@kernel', '@logger' ]
        tags:
            - { name: kernel.event_listener, event: kernel.exception }

    app.event.jwt_created_listener:
        class: App\EventListener\JWTCreatedListener
        tags:
            - { name: kernel.event_listener, event: lexik_jwt_authentication.on_jwt_created, method: onJWTCreated }

    app.event.jwt_decoded_listener:
        class: App\EventListener\JWTDecodedListener
        tags:
          - { name: kernel.event_listener, event: lexik_jwt_authentication.on_jwt_decoded, method: onJWTDecoded }

    app.monolog_formatter:
        class: Monolog\Formatter\LineFormatter
        arguments: [ ~, ~, true ]

    repositoryAuthor:
        class: Doctrine\ORM\EntityRepository
        factory: [ '@doctrine.orm.entity_manager', getRepository ]
        arguments:
            - App\Entity\Author

    repositoryBook:
        class: Doctrine\ORM\EntityRepository
        factory: [ '@doctrine.orm.entity_manager', getRepository ]
        arguments:
            - App\Entity\Book

    repositoryUser:
        class: Doctrine\ORM\EntityRepository
        factory: [ '@doctrine.orm.entity_manager', getRepository ]
        arguments:
            - App\Entity\User

    app.services.author:
        class: App\Services\Author
        arguments:
            - '@repositoryAuthor'
            - '@validator'

    app.services.book:
        class: App\Services\Book
        arguments:
            - '@repositoryBook'
            - '@validator'

    app.services.user:
        class: App\Services\User
        arguments:
            - '@repositoryBook'
            - '@validator'

    jms_serializer.cache_naming_strategy:
        class: JMS\Serializer\Naming\IdenticalPropertyNamingStrategy